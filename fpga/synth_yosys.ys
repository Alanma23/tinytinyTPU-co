# Yosys synthesis script for TinyTinyTPU
# Auto-generated by build_yosys.sh

# Read SystemVerilog RTL files
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/pe.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/mmu.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/weight_fifo.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/dual_weight_fifo.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/accumulator_align.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/accumulator_mem.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/accumulator.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/activation_func.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/normalizer.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/loss_block.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/activation_pipeline.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/unified_buffer.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/mlp_top.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/uart_rx.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/uart_tx.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/uart_controller.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/tpu_bridge.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/../rtl/tpu_top.sv
read_verilog -sv /Users/abiralshakya/Documents/tpu_to_fpga_rev2/tinytinyTPU-co/fpga/basys3_top.sv

# Set top module
hierarchy -top basys3_top

# Synthesize for Xilinx 7-series
synth_xilinx -top basys3_top -family xc7

# Write output files
write_verilog basys3_top_yosys.v
write_json basys3_top.json
write_edif basys3_top.edif

# Statistics
stat
